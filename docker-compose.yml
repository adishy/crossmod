version: '3'
services:
    web:
        build: .
        ports:
            - 8000:8000
        networks:
            - default
        depends_on: 
            - redis
        volumes:
            - .:/crossmod

    redis:
        image: redis:4.0.5-alpine
        command: ["redis-server", "--appendonly", "yes"]
        hostname: redis
        networks:
            - default
        volumes:
            - redis-data:/data
    
networks:
    default:
        driver: "bridge"

volumes:
    redis-data: